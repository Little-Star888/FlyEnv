"use strict";var Yn=Object.create;var ge=Object.defineProperty;var Kn=Object.getOwnPropertyDescriptor;var Gn=Object.getOwnPropertyNames;var Qn=Object.getPrototypeOf,Vn=Object.prototype.hasOwnProperty;var U=(e,t)=>()=>(e&&(t=e(e=0)),t);var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Y=(e,t)=>{for(var r in t)ge(e,r,{get:t[r],enumerable:!0})},mt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Gn(t))!Vn.call(e,i)&&i!==r&&ge(e,i,{get:()=>t[i],enumerable:!(n=Kn(t,i))||n.enumerable});return e};var zn=(e,t,r)=>(r=e!=null?Yn(Qn(e)):{},mt(t||!e||!e.__esModule?ge(r,"default",{value:e,enumerable:!0}):r,e)),Xn=e=>mt(ge({},"__esModule",{value:!0}),e);var D=p(Te=>{"use strict";Te.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Te.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}});var dt=p((ws,yt)=>{var Z=require("constants"),Zn=process.cwd,xe=null,ei=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return xe||(xe=Zn.call(process)),xe};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Le=process.chdir,process.chdir=function(e){xe=null,Le.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Le));var Le;yt.exports=ti;function ti(e){Z.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=y(e.statSync),e.fstatSync=y(e.fstatSync),e.lstatSync=y(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,u,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,u,m,l){l&&process.nextTick(l)},e.lchownSync=function(){}),ei==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function u(m,l,d){var P=Date.now(),v=0;c(m,l,function E(J){if(J&&(J.code==="EACCES"||J.code==="EPERM"||J.code==="EBUSY")&&Date.now()-P<6e4){setTimeout(function(){e.stat(l,function(I,fe){I&&I.code==="ENOENT"?c(m,l,E):d(J)})},v),v<100&&(v+=10);return}d&&d(J)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function u(m,l,d,P,v,E){var J;if(E&&typeof E=="function"){var I=0;J=function(fe,lt,ft){if(fe&&fe.code==="EAGAIN"&&I<10)return I++,c.call(e,m,l,d,P,v,J);E.apply(this,arguments)}}return c.call(e,m,l,d,P,v,J)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(u,m,l,d,P){for(var v=0;;)try{return c.call(e,u,m,l,d,P)}catch(E){if(E.code==="EAGAIN"&&v<10){v++;continue}throw E}}}(e.readSync);function t(c){c.lchmod=function(u,m,l){c.open(u,Z.O_WRONLY|Z.O_SYMLINK,m,function(d,P){if(d){l&&l(d);return}c.fchmod(P,m,function(v){c.close(P,function(E){l&&l(v||E)})})})},c.lchmodSync=function(u,m){var l=c.openSync(u,Z.O_WRONLY|Z.O_SYMLINK,m),d=!0,P;try{P=c.fchmodSync(l,m),d=!1}finally{if(d)try{c.closeSync(l)}catch{}else c.closeSync(l)}return P}}function r(c){Z.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(u,m,l,d){c.open(u,Z.O_SYMLINK,function(P,v){if(P){d&&d(P);return}c.futimes(v,m,l,function(E){c.close(v,function(J){d&&d(E||J)})})})},c.lutimesSync=function(u,m,l){var d=c.openSync(u,Z.O_SYMLINK),P,v=!0;try{P=c.futimesSync(d,m,l),v=!1}finally{if(v)try{c.closeSync(d)}catch{}else c.closeSync(d)}return P}):c.futimes&&(c.lutimes=function(u,m,l,d){d&&process.nextTick(d)},c.lutimesSync=function(){})}function n(c){return c&&function(u,m,l){return c.call(e,u,m,function(d){g(d)&&(d=null),l&&l.apply(this,arguments)})}}function i(c){return c&&function(u,m){try{return c.call(e,u,m)}catch(l){if(!g(l))throw l}}}function o(c){return c&&function(u,m,l,d){return c.call(e,u,m,l,function(P){g(P)&&(P=null),d&&d.apply(this,arguments)})}}function s(c){return c&&function(u,m,l){try{return c.call(e,u,m,l)}catch(d){if(!g(d))throw d}}}function a(c){return c&&function(u,m,l){typeof m=="function"&&(l=m,m=null);function d(P,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),l&&l.apply(this,arguments)}return m?c.call(e,u,m,d):c.call(e,u,d)}}function y(c){return c&&function(u,m){var l=m?c.call(e,u,m):c.call(e,u);return l&&(l.uid<0&&(l.uid+=4294967296),l.gid<0&&(l.gid+=4294967296)),l}}function g(c){if(!c||c.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var wt=p((Ss,pt)=>{var ht=require("stream").Stream;pt.exports=ri;function ri(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);ht.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,y=s.length;a<y;a++){var g=s[a];this[g]=i[g]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,u){if(c){o.emit("error",c),o.readable=!1;return}o.fd=u,o.emit("open",u),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);ht.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var y=o[s];this[y]=i[y]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var vt=p((vs,St)=>{"use strict";St.exports=ii;var ni=Object.getPrototypeOf||function(e){return e.__proto__};function ii(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:ni(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var se=p((gs,Me)=>{var b=require("fs"),oi=dt(),si=wt(),ci=vt(),Pe=require("util"),R,Fe;typeof Symbol=="function"&&typeof Symbol.for=="function"?(R=Symbol.for("graceful-fs.queue"),Fe=Symbol.for("graceful-fs.previous")):(R="___graceful-fs.queue",Fe="___graceful-fs.previous");function ai(){}function Pt(e,t){Object.defineProperty(e,R,{get:function(){return t}})}var ne=ai;Pe.debuglog?ne=Pe.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ne=function(){var e=Pe.format.apply(Pe,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `)});b[R]||(gt=global[R]||[],Pt(b,gt),b.close=function(e){function t(r,n){return e.call(b,r,function(i){i||xt(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Fe,{value:e}),t}(b.close),b.closeSync=function(e){function t(r){e.apply(b,arguments),xt()}return Object.defineProperty(t,Fe,{value:e}),t}(b.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ne(b[R]),require("assert").equal(b[R].length,0)}));var gt;global[R]||Pt(global,b[R]);Me.exports=_e(ci(b));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!b.__patched&&(Me.exports=_e(b),b.__patched=!0);function _e(e){oi(e),e.gracefulify=_e,e.createReadStream=lt,e.createWriteStream=ft;var t=e.readFile;e.readFile=r;function r(h,S,w){return typeof S=="function"&&(w=S,S=null),T(h,S,w);function T(L,O,q,$){return t(L,O,function(x){x&&(x.code==="EMFILE"||x.code==="ENFILE")?oe([T,[L,O,q],x,$||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(h,S,w,T){return typeof w=="function"&&(T=w,w=null),L(h,S,w,T);function L(O,q,$,x,_){return n(O,q,$,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?oe([L,[O,q,$,x],k,_||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(h,S,w,T){return typeof w=="function"&&(T=w,w=null),L(h,S,w,T);function L(O,q,$,x,_){return o(O,q,$,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?oe([L,[O,q,$,x],k,_||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=y);function y(h,S,w,T){return typeof w=="function"&&(T=w,w=0),L(h,S,w,T);function L(O,q,$,x,_){return a(O,q,$,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?oe([L,[O,q,$,x],k,_||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}var g=e.readdir;e.readdir=u;var c=/^v[0-5]\./;function u(h,S,w){typeof S=="function"&&(w=S,S=null);var T=c.test(process.version)?function(q,$,x,_){return g(q,L(q,$,x,_))}:function(q,$,x,_){return g(q,$,L(q,$,x,_))};return T(h,S,w);function L(O,q,$,x){return function(_,k){_&&(_.code==="EMFILE"||_.code==="ENFILE")?oe([T,[O,q,$],_,x||Date.now(),Date.now()]):(k&&k.sort&&k.sort(),typeof $=="function"&&$.call(this,_,k))}}}if(process.version.substr(0,4)==="v0.8"){var m=si(e);E=m.ReadStream,I=m.WriteStream}var l=e.ReadStream;l&&(E.prototype=Object.create(l.prototype),E.prototype.open=J);var d=e.WriteStream;d&&(I.prototype=Object.create(d.prototype),I.prototype.open=fe),Object.defineProperty(e,"ReadStream",{get:function(){return E},set:function(h){E=h},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return I},set:function(h){I=h},enumerable:!0,configurable:!0});var P=E;Object.defineProperty(e,"FileReadStream",{get:function(){return P},set:function(h){P=h},enumerable:!0,configurable:!0});var v=I;Object.defineProperty(e,"FileWriteStream",{get:function(){return v},set:function(h){v=h},enumerable:!0,configurable:!0});function E(h,S){return this instanceof E?(l.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function J(){var h=this;Ne(h.path,h.flags,h.mode,function(S,w){S?(h.autoClose&&h.destroy(),h.emit("error",S)):(h.fd=w,h.emit("open",w),h.read())})}function I(h,S){return this instanceof I?(d.apply(this,arguments),this):I.apply(Object.create(I.prototype),arguments)}function fe(){var h=this;Ne(h.path,h.flags,h.mode,function(S,w){S?(h.destroy(),h.emit("error",S)):(h.fd=w,h.emit("open",w))})}function lt(h,S){return new e.ReadStream(h,S)}function ft(h,S){return new e.WriteStream(h,S)}var Hn=e.open;e.open=Ne;function Ne(h,S,w,T){return typeof w=="function"&&(T=w,w=null),L(h,S,w,T);function L(O,q,$,x,_){return Hn(O,q,$,function(k,ds){k&&(k.code==="EMFILE"||k.code==="ENFILE")?oe([L,[O,q,$,x],k,_||Date.now(),Date.now()]):typeof x=="function"&&x.apply(this,arguments)})}}return e}function oe(e){ne("ENQUEUE",e[0].name,e[1]),b[R].push(e),Re()}var ke;function xt(){for(var e=Date.now(),t=0;t<b[R].length;++t)b[R][t].length>2&&(b[R][t][3]=e,b[R][t][4]=e);Re()}function Re(){if(clearTimeout(ke),ke=void 0,b[R].length!==0){var e=b[R].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)ne("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){ne("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,y=Math.max(o-i,1),g=Math.min(y*1.2,100);a>=g?(ne("RETRY",t.name,r),t.apply(null,r.concat([i]))):b[R].push(e)}ke===void 0&&(ke=setTimeout(Re,0))}}});var A=p(z=>{"use strict";var kt=D().fromCallback,j=se(),ui=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof j[e]=="function");Object.assign(z,j);ui.forEach(e=>{z[e]=kt(j[e])});z.exists=function(e,t){return typeof t=="function"?j.exists(e,t):new Promise(r=>j.exists(e,r))};z.read=function(e,t,r,n,i,o){return typeof o=="function"?j.read(e,t,r,n,i,o):new Promise((s,a)=>{j.read(e,t,r,n,i,(y,g,c)=>{if(y)return a(y);s({bytesRead:g,buffer:c})})})};z.write=function(e,t,...r){return typeof r[r.length-1]=="function"?j.write(e,t,...r):new Promise((n,i)=>{j.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};z.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?j.readv(e,t,...r):new Promise((n,i)=>{j.readv(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesRead:s,buffers:a})})})};z.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?j.writev(e,t,...r):new Promise((n,i)=>{j.writev(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffers:a})})})};typeof j.realpath.native=="function"?z.realpath.native=kt(j.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Et=p((Ps,Ft)=>{"use strict";var li=require("path");Ft.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(li.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var Ot=p((ks,Ie)=>{"use strict";var qt=A(),{checkPath:bt}=Et(),$t=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Ie.exports.makeDir=async(e,t)=>(bt(e),qt.mkdir(e,{mode:$t(t),recursive:!0}));Ie.exports.makeDirSync=(e,t)=>(bt(e),qt.mkdirSync(e,{mode:$t(t),recursive:!0}))});var G=p((Fs,Dt)=>{"use strict";var fi=D().fromPromise,{makeDir:mi,makeDirSync:je}=Ot(),Ae=fi(mi);Dt.exports={mkdirs:Ae,mkdirsSync:je,mkdirp:Ae,mkdirpSync:je,ensureDir:Ae,ensureDirSync:je}});var ee=p((Es,Nt)=>{"use strict";var yi=D().fromPromise,Ct=A();function di(e){return Ct.access(e).then(()=>!0).catch(()=>!1)}Nt.exports={pathExists:yi(di),pathExistsSync:Ct.existsSync}});var We=p((qs,Tt)=>{"use strict";var ce=A(),hi=D().fromPromise;async function pi(e,t,r){let n=await ce.open(e,"r+"),i=null;try{await ce.futimes(n,t,r)}finally{try{await ce.close(n)}catch(o){i=o}}if(i)throw i}function wi(e,t,r){let n=ce.openSync(e,"r+");return ce.futimesSync(n,t,r),ce.closeSync(n)}Tt.exports={utimesMillis:hi(pi),utimesMillisSync:wi}});var ie=p((bs,Mt)=>{"use strict";var ae=A(),C=require("path"),Lt=D().fromPromise;function Si(e,t,r){let n=r.dereference?i=>ae.stat(i,{bigint:!0}):i=>ae.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function vi(e,t,r){let n,i=r.dereference?s=>ae.statSync(s,{bigint:!0}):s=>ae.lstatSync(s,{bigint:!0}),o=i(e);try{n=i(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}async function gi(e,t,r,n){let{srcStat:i,destStat:o}=await Si(e,t,n);if(o){if(me(i,o)){let s=C.basename(e),a=C.basename(t);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Be(e,t))throw new Error(Ee(e,t,r));return{srcStat:i,destStat:o}}function xi(e,t,r,n){let{srcStat:i,destStat:o}=vi(e,t,n);if(o){if(me(i,o)){let s=C.basename(e),a=C.basename(t);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Be(e,t))throw new Error(Ee(e,t,r));return{srcStat:i,destStat:o}}async function _t(e,t,r,n){let i=C.resolve(C.dirname(e)),o=C.resolve(C.dirname(r));if(o===i||o===C.parse(o).root)return;let s;try{s=await ae.stat(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(me(t,s))throw new Error(Ee(e,r,n));return _t(e,t,o,n)}function Rt(e,t,r,n){let i=C.resolve(C.dirname(e)),o=C.resolve(C.dirname(r));if(o===i||o===C.parse(o).root)return;let s;try{s=ae.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(me(t,s))throw new Error(Ee(e,r,n));return Rt(e,t,o,n)}function me(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Be(e,t){let r=C.resolve(e).split(C.sep).filter(i=>i),n=C.resolve(t).split(C.sep).filter(i=>i);return r.every((i,o)=>n[o]===i)}function Ee(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}Mt.exports={checkPaths:Lt(gi),checkPathsSync:xi,checkParentPaths:Lt(_t),checkParentPathsSync:Rt,isSrcSubdir:Be,areIdentical:me}});var Bt=p(($s,Wt)=>{"use strict";var M=A(),ye=require("path"),{mkdirs:Pi}=G(),{pathExists:ki}=ee(),{utimesMillis:Fi}=We(),de=ie();async function Ei(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await de.checkPaths(e,t,"copy",r);if(await de.checkParentPaths(e,n,t,"copy"),!await jt(e,t,r))return;let s=ye.dirname(t);await ki(s)||await Pi(s),await At(i,e,t,r)}async function jt(e,t,r){return r.filter?r.filter(e,t):!0}async function At(e,t,r,n){let o=await(n.dereference?M.stat:M.lstat)(t);if(o.isDirectory())return Oi(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return qi(o,e,t,r,n);if(o.isSymbolicLink())return Di(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function qi(e,t,r,n,i){if(!t)return It(e,r,n,i);if(i.overwrite)return await M.unlink(n),It(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function It(e,t,r,n){if(await M.copyFile(t,r),n.preserveTimestamps){bi(e.mode)&&await $i(r,e.mode);let i=await M.stat(t);await Fi(r,i.atime,i.mtime)}return M.chmod(r,e.mode)}function bi(e){return(e&128)===0}function $i(e,t){return M.chmod(e,t|128)}async function Oi(e,t,r,n,i){t||await M.mkdir(n);let o=[];for await(let s of await M.opendir(r)){let a=ye.join(r,s.name),y=ye.join(n,s.name);o.push(jt(a,y,i).then(g=>{if(g)return de.checkPaths(a,y,"copy",i).then(({destStat:c})=>At(c,a,y,i))}))}await Promise.all(o),t||await M.chmod(n,e.mode)}async function Di(e,t,r,n){let i=await M.readlink(t);if(n.dereference&&(i=ye.resolve(process.cwd(),i)),!e)return M.symlink(i,r);let o=null;try{o=await M.readlink(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return M.symlink(i,r);throw s}if(n.dereference&&(o=ye.resolve(process.cwd(),o)),de.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(de.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return await M.unlink(r),M.symlink(i,r)}Wt.exports=Ei});var Kt=p((Os,Yt)=>{"use strict";var W=se(),he=require("path"),Ci=G().mkdirsSync,Ni=We().utimesMillisSync,pe=ie();function Ti(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=pe.checkPathsSync(e,t,"copy",r);if(pe.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let o=he.dirname(t);return W.existsSync(o)||Ci(o),Jt(i,e,t,r)}function Jt(e,t,r,n){let o=(n.dereference?W.statSync:W.lstatSync)(t);if(o.isDirectory())return Ai(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Li(o,e,t,r,n);if(o.isSymbolicLink())return Ji(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Li(e,t,r,n,i){return t?_i(e,r,n,i):Ut(e,r,n,i)}function _i(e,t,r,n){if(n.overwrite)return W.unlinkSync(r),Ut(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Ut(e,t,r,n){return W.copyFileSync(t,r),n.preserveTimestamps&&Ri(e.mode,t,r),Je(r,e.mode)}function Ri(e,t,r){return Mi(e)&&Ii(r,e),ji(t,r)}function Mi(e){return(e&128)===0}function Ii(e,t){return Je(e,t|128)}function Je(e,t){return W.chmodSync(e,t)}function ji(e,t){let r=W.statSync(e);return Ni(t,r.atime,r.mtime)}function Ai(e,t,r,n,i){return t?Ht(r,n,i):Wi(e.mode,r,n,i)}function Wi(e,t,r,n){return W.mkdirSync(r),Ht(t,r,n),Je(r,e)}function Ht(e,t,r){let n=W.opendirSync(e);try{let i;for(;(i=n.readSync())!==null;)Bi(i.name,e,t,r)}finally{n.closeSync()}}function Bi(e,t,r,n){let i=he.join(t,e),o=he.join(r,e);if(n.filter&&!n.filter(i,o))return;let{destStat:s}=pe.checkPathsSync(i,o,"copy",n);return Jt(s,i,o,n)}function Ji(e,t,r,n){let i=W.readlinkSync(t);if(n.dereference&&(i=he.resolve(process.cwd(),i)),e){let o;try{o=W.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return W.symlinkSync(i,r);throw s}if(n.dereference&&(o=he.resolve(process.cwd(),o)),pe.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(pe.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Ui(i,r)}else return W.symlinkSync(i,r)}function Ui(e,t){return W.unlinkSync(t),W.symlinkSync(e,t)}Yt.exports=Ti});var qe=p((Ds,Gt)=>{"use strict";var Hi=D().fromPromise;Gt.exports={copy:Hi(Bt()),copySync:Kt()}});var we=p((Cs,Vt)=>{"use strict";var Qt=se(),Yi=D().fromCallback;function Ki(e,t){Qt.rm(e,{recursive:!0,force:!0},t)}function Gi(e){Qt.rmSync(e,{recursive:!0,force:!0})}Vt.exports={remove:Yi(Ki),removeSync:Gi}});var ir=p((Ns,nr)=>{"use strict";var Qi=D().fromPromise,Zt=A(),er=require("path"),tr=G(),rr=we(),zt=Qi(async function(t){let r;try{r=await Zt.readdir(t)}catch{return tr.mkdirs(t)}return Promise.all(r.map(n=>rr.remove(er.join(t,n))))});function Xt(e){let t;try{t=Zt.readdirSync(e)}catch{return tr.mkdirsSync(e)}t.forEach(r=>{r=er.join(e,r),rr.removeSync(r)})}nr.exports={emptyDirSync:Xt,emptydirSync:Xt,emptyDir:zt,emptydir:zt}});var ar=p((Ts,cr)=>{"use strict";var Vi=D().fromPromise,or=require("path"),X=A(),sr=G();async function zi(e){let t;try{t=await X.stat(e)}catch{}if(t&&t.isFile())return;let r=or.dirname(e),n=null;try{n=await X.stat(r)}catch(i){if(i.code==="ENOENT"){await sr.mkdirs(r),await X.writeFile(e,"");return}else throw i}n.isDirectory()?await X.writeFile(e,""):await X.readdir(r)}function Xi(e){let t;try{t=X.statSync(e)}catch{}if(t&&t.isFile())return;let r=or.dirname(e);try{X.statSync(r).isDirectory()||X.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")sr.mkdirsSync(r);else throw n}X.writeFileSync(e,"")}cr.exports={createFile:Vi(zi),createFileSync:Xi}});var yr=p((Ls,mr)=>{"use strict";var Zi=D().fromPromise,ur=require("path"),te=A(),lr=G(),{pathExists:eo}=ee(),{areIdentical:fr}=ie();async function to(e,t){let r;try{r=await te.lstat(t)}catch{}let n;try{n=await te.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}if(r&&fr(n,r))return;let i=ur.dirname(t);await eo(i)||await lr.mkdirs(i),await te.link(e,t)}function ro(e,t){let r;try{r=te.lstatSync(t)}catch{}try{let o=te.lstatSync(e);if(r&&fr(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=ur.dirname(t);return te.existsSync(n)||lr.mkdirsSync(n),te.linkSync(e,t)}mr.exports={createLink:Zi(to),createLinkSync:ro}});var hr=p((_s,dr)=>{"use strict";var re=require("path"),Se=A(),{pathExists:no}=ee(),io=D().fromPromise;async function oo(e,t){if(re.isAbsolute(e)){try{await Se.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:e}}let r=re.dirname(t),n=re.join(r,e);if(await no(n))return{toCwd:n,toDst:e};try{await Se.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:re.relative(r,e)}}function so(e,t){if(re.isAbsolute(e)){if(!Se.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=re.dirname(t),n=re.join(r,e);if(Se.existsSync(n))return{toCwd:n,toDst:e};if(!Se.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:re.relative(r,e)}}dr.exports={symlinkPaths:io(oo),symlinkPathsSync:so}});var Sr=p((Rs,wr)=>{"use strict";var pr=A(),co=D().fromPromise;async function ao(e,t){if(t)return t;let r;try{r=await pr.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function uo(e,t){if(t)return t;let r;try{r=pr.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}wr.exports={symlinkType:co(ao),symlinkTypeSync:uo}});var Pr=p((Ms,xr)=>{"use strict";var lo=D().fromPromise,vr=require("path"),Q=A(),{mkdirs:fo,mkdirsSync:mo}=G(),{symlinkPaths:yo,symlinkPathsSync:ho}=hr(),{symlinkType:po,symlinkTypeSync:wo}=Sr(),{pathExists:So}=ee(),{areIdentical:gr}=ie();async function vo(e,t,r){let n;try{n=await Q.lstat(t)}catch{}if(n&&n.isSymbolicLink()){let[a,y]=await Promise.all([Q.stat(e),Q.stat(t)]);if(gr(a,y))return}let i=await yo(e,t);e=i.toDst;let o=await po(i.toCwd,r),s=vr.dirname(t);return await So(s)||await fo(s),Q.symlink(e,t,o)}function go(e,t,r){let n;try{n=Q.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let a=Q.statSync(e),y=Q.statSync(t);if(gr(a,y))return}let i=ho(e,t);e=i.toDst,r=wo(i.toCwd,r);let o=vr.dirname(t);return Q.existsSync(o)||mo(o),Q.symlinkSync(e,t,r)}xr.exports={createSymlink:lo(vo),createSymlinkSync:go}});var Dr=p((Is,Or)=>{"use strict";var{createFile:kr,createFileSync:Fr}=ar(),{createLink:Er,createLinkSync:qr}=yr(),{createSymlink:br,createSymlinkSync:$r}=Pr();Or.exports={createFile:kr,createFileSync:Fr,ensureFile:kr,ensureFileSync:Fr,createLink:Er,createLinkSync:qr,ensureLink:Er,ensureLinkSync:qr,createSymlink:br,createSymlinkSync:$r,ensureSymlink:br,ensureSymlinkSync:$r}});var be=p((js,Cr)=>{function xo(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function Po(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Cr.exports={stringify:xo,stripBom:Po}});var _r=p((As,Lr)=>{var ue;try{ue=se()}catch{ue=require("fs")}var $e=D(),{stringify:Nr,stripBom:Tr}=be();async function ko(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ue,n="throws"in t?t.throws:!0,i=await $e.fromCallback(r.readFile)(e,t);i=Tr(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(s){if(n)throw s.message=`${e}: ${s.message}`,s;return null}return o}var Fo=$e.fromPromise(ko);function Eo(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ue,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Tr(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function qo(e,t,r={}){let n=r.fs||ue,i=Nr(t,r);await $e.fromCallback(n.writeFile)(e,i,r)}var bo=$e.fromPromise(qo);function $o(e,t,r={}){let n=r.fs||ue,i=Nr(t,r);return n.writeFileSync(e,i,r)}var Oo={readFile:Fo,readFileSync:Eo,writeFile:bo,writeFileSync:$o};Lr.exports=Oo});var Mr=p((Ws,Rr)=>{"use strict";var Oe=_r();Rr.exports={readJson:Oe.readFile,readJsonSync:Oe.readFileSync,writeJson:Oe.writeFile,writeJsonSync:Oe.writeFileSync}});var De=p((Bs,Ar)=>{"use strict";var Do=D().fromPromise,Ue=A(),Ir=require("path"),jr=G(),Co=ee().pathExists;async function No(e,t,r="utf-8"){let n=Ir.dirname(e);return await Co(n)||await jr.mkdirs(n),Ue.writeFile(e,t,r)}function To(e,...t){let r=Ir.dirname(e);Ue.existsSync(r)||jr.mkdirsSync(r),Ue.writeFileSync(e,...t)}Ar.exports={outputFile:Do(No),outputFileSync:To}});var Br=p((Js,Wr)=>{"use strict";var{stringify:Lo}=be(),{outputFile:_o}=De();async function Ro(e,t,r={}){let n=Lo(t,r);await _o(e,n,r)}Wr.exports=Ro});var Ur=p((Us,Jr)=>{"use strict";var{stringify:Mo}=be(),{outputFileSync:Io}=De();function jo(e,t,r){let n=Mo(t,r);Io(e,n,r)}Jr.exports=jo});var Yr=p((Hs,Hr)=>{"use strict";var Ao=D().fromPromise,B=Mr();B.outputJson=Ao(Br());B.outputJsonSync=Ur();B.outputJSON=B.outputJson;B.outputJSONSync=B.outputJsonSync;B.writeJSON=B.writeJson;B.writeJSONSync=B.writeJsonSync;B.readJSON=B.readJson;B.readJSONSync=B.readJsonSync;Hr.exports=B});var zr=p((Ys,Vr)=>{"use strict";var Wo=A(),Kr=require("path"),{copy:Bo}=qe(),{remove:Qr}=we(),{mkdirp:Jo}=G(),{pathExists:Uo}=ee(),Gr=ie();async function Ho(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await Gr.checkPaths(e,t,"move",r);await Gr.checkParentPaths(e,i,t,"move");let s=Kr.dirname(t);return Kr.parse(s).root!==s&&await Jo(s),Yo(e,t,n,o)}async function Yo(e,t,r,n){if(!n){if(r)await Qr(t);else if(await Uo(t))throw new Error("dest already exists.")}try{await Wo.rename(e,t)}catch(i){if(i.code!=="EXDEV")throw i;await Ko(e,t,r)}}async function Ko(e,t,r){return await Bo(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Qr(e)}Vr.exports=Ho});var rn=p((Ks,tn)=>{"use strict";var Zr=se(),Ye=require("path"),Go=qe().copySync,en=we().removeSync,Qo=G().mkdirpSync,Xr=ie();function Vo(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Xr.checkPathsSync(e,t,"move",r);return Xr.checkParentPathsSync(e,i,t,"move"),zo(t)||Qo(Ye.dirname(t)),Xo(e,t,n,o)}function zo(e){let t=Ye.dirname(e);return Ye.parse(t).root===t}function Xo(e,t,r,n){if(n)return He(e,t,r);if(r)return en(t),He(e,t,r);if(Zr.existsSync(t))throw new Error("dest already exists.");return He(e,t,r)}function He(e,t,r){try{Zr.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Zo(e,t,r)}}function Zo(e,t,r){return Go(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),en(e)}tn.exports=Vo});var on=p((Gs,nn)=>{"use strict";var es=D().fromPromise;nn.exports={move:es(zr()),moveSync:rn()}});var cn=p((Qs,sn)=>{"use strict";sn.exports={...A(),...qe(),...ir(),...Dr(),...Yr(),...G(),...on(),...De(),...ee(),...we()}});var an,V,N,Vs,Ke,Ge,zs,un=U(()=>{"use strict";an=zn(cn(),1),V=require("node:fs"),N=require("node:fs/promises"),{removeSync:Vs,mkdirp:Ke,remove:Ge,copy:zs}=an.default});function yn(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function Qe(e=32){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}async function dn(e){let r=(await f(`ls -al "${e}"`))?.stdout?.trim()?.split(`
`)?.[1]?.split(" ")?.filter(n=>!!n.trim())??[];return`${r[2]}:${r[3]}`}function le(){return hn==="darwin"}function Ce(){return hn==="linux"}var ln,fn,mn,f,hn,H=U(()=>{"use strict";un();ln=require("child_process"),fn=require("util"),mn=require("node:os"),f=(0,fn.promisify)(ln.exec);hn=(0,mn.platform)()});var F,K=U(()=>{"use strict";H();F=class{exec(t,...r){let n=this?.[t];return n?n.call(this,...r):new Promise((i,o)=>{o(new Error("No Found Function"))})}startService(t,r={}){return new Promise(async(n,i)=>{try{await f(t,r)}catch(o){i(o);return}n(!0)})}}});var pn={};Y(pn,{default:()=>ts});var Ve,ze,Xe,ts,wn=U(()=>{"use strict";Ve=require("node:path");H();ze=require("node:fs");K();Xe=class extends F{writeFileByRoot(t,r){return new Promise(async(n,i)=>{let o=!1,s;try{await(0,N.writeFile)(t,r)}catch(a){o=!0,s=a}if(o){let a=(0,Ve.join)("/tmp",`${Qe()}.txt`);await(0,N.writeFile)(a,r);try{await f(`cp -f "${a}" "${t}"`),o=!1}catch(y){s=y}try{await f(`rm -rf "${a}"`)}catch{}}if(o){i(s);return}n(!0)})}readFileByRoot(t){return new Promise(async(r,n)=>{let i="",o,s=!1;try{i=await(0,N.readFile)(t,"utf-8")}catch(a){o=a,s=!0}if(s){let a=(0,Ve.join)(global.Server.Cache,`${Qe()}.txt`);try{await f(`cp -f "${t}" "${a}"`),i=await(0,N.readFile)(a,"utf-8"),await f(`rm -rf "${a}"`),s=!1}catch(y){o=y,s=!0}}if(s)return n(o);r(i)})}processList(){return new Promise(async t=>{let r="";try{r=(await f("ps axo user,pid,ppid,command")).stdout}catch{}return t(r?r.trim().split(`
`).filter(n=>!!n.trim()).map(n=>{let i=n.split(" ").filter(g=>!!g.trim()),o=i.shift(),s=i.shift(),a=i.shift(),y=i.join(" ");return{USER:o,PID:s,PPID:a,COMMAND:y}}):[])})}rm(t){return new Promise(async r=>{try{await f(`rm -rf "${t}"`)}catch{}r(!0)})}chmod(t,r){return new Promise(async n=>{if((0,ze.existsSync)(t))try{await f(`chmod ${r} "${t}"`)}catch{}n(!0)})}kill(t,r){return new Promise(async n=>{try{await f(`kill ${t} ${r.join(" ")}`)}catch{}n(!0)})}ln_s(t,r){return new Promise(async n=>{if((0,ze.existsSync)(t))try{await f(`ln -s "${t}" "${r}"`)}catch{}n(!0)})}killPorts(t){return new Promise(async r=>{let n=new Set;for(let i of t){let o=await f(`lsof -nP -i:${i} | grep '(LISTEN)' | awk '{print $1,$2,$3,$9,$10}'`);o=o?.stdout??"",o.split(`
`).filter(a=>a.includes(`:${i} (LISTEN)`)).map(a=>{let y=a.split(" ").filter(g=>g.trim().length>0);return y.shift(),y.shift()}).forEach(a=>n.add(a))}if(n.size>0)try{await f(["kill","-9",...Array.from(n)].join(" "))}catch{}r(!0)})}getPortPids(t){return new Promise(async r=>{let i=(await f(`lsof -nP -i:${t} | awk '{print $1,$2,$3}'`)).stdout.toString().trim().split(`
`).filter((o,s)=>s>0).map(o=>{let s=o.split(" ").filter(c=>c.trim().length>0),a=s.pop(),y=s.pop(),g=s.join(" ");return{USER:a,PID:y,COMMAND:g}});r(i)})}},ts=new Xe});var Sn={};Y(Sn,{default:()=>rs});var Ze,rs,vn=U(()=>{"use strict";K();H();Ze=class extends F{macportsDirFixed(t,r){return new Promise(async n=>{try{await f(`mkdir -p ${t}`),await f(`cp -R ${r} ${t}`)}catch{}n(!0)})}},rs=new Ze});var xn={};Y(xn,{default:()=>ns});var gn,et,ns,Pn=U(()=>{"use strict";gn=require("node:fs");K();H();et=class extends F{sslDirFixed(t){return new Promise(async r=>{if((0,gn.existsSync)(t))try{(await f(["ls","-al",t].join(" "))).stdout.includes(" root ")&&await f(["rm","-rf",t].join(" "))}catch{}r(!0)})}},ns=new et});var Fn={};Y(Fn,{default:()=>is});var kn,tt,is,En=U(()=>{"use strict";kn=require("node:fs");K();H();tt=class extends F{logFileFixed(t,r){return new Promise(async n=>{(0,kn.existsSync)(t)&&await f(`chown ${r} ${t}`),n(!0)})}},is=new tt});var bn={};Y(bn,{default:()=>os});var qn,rt,os,$n=U(()=>{"use strict";K();qn=require("node:path");H();rt=class extends F{iniFileFixed(t,r){return new Promise(async n=>{await Ke((0,qn.dirname)(t)),await f(`cp -f "${r}" "${t}"`),await f(`chmod 755 "${t}"`),n(!0)})}iniDefaultFileFixed(t,r){return new Promise(async n=>{await f(`cp -f "${r}" "${t}"`),n(!0)})}},os=new rt});var Dn={};Y(Dn,{default:()=>ss});var On,nt,ss,Cn=U(()=>{"use strict";On=require("node:fs");K();H();nt=class extends F{binFixed(t){return new Promise(async r=>{if(le()&&(0,On.existsSync)(t))try{await f(`xattr -dr "com.apple.quarantine" "${t}"`)}catch{}r(!0)})}},ss=new nt});var Nn={};Y(Nn,{default:()=>cs});var it,cs,Tn=U(()=>{"use strict";K();H();it=class extends F{macportsDirFixed(t,r,n,i){return new Promise(async o=>{try{await f(`mkdir -p "${t}"`),await f(`cp -R "${r}/*" "${t}"`),await f(`mkdir -p "${n}"`),await f(`cp -R "${i}" "${n}"`)}catch{}o(!0)})}},cs=new it});var Ln={};Y(Ln,{default:()=>as});var ot,as,_n=U(()=>{"use strict";K();ot=class extends F{},as=new ot});var Rn={};Y(Rn,{default:()=>us});var st,us,Mn=U(()=>{"use strict";K();H();st=class extends F{initPlugin(t){return new Promise(async(r,n)=>{try{await f("./rabbitmq-plugins enable rabbitmq_management",{cwd:t})}catch(i){n(i);return}r(!0)})}},us=new st});var jn={};Y(jn,{default:()=>ls});var In,ct,ls,An=U(()=>{"use strict";K();H();In=require("node:path"),ct=class extends F{async sslAddTrustedCert(t,r){if(le())await f(`security add-trusted-cert -d -r trustRoot -k "/Library/Keychains/System.keychain" "${r}"`,{cwd:t});else if(Ce()){let n=(0,In.join)(t,r),i=`/usr/local/share/ca-certificates/${r}`,o=`/etc/pki/ca-trust/source/anchors/${r}`,s=!1;try{await f(`sudo cp "${n}" "${i}"`),await f("sudo update-ca-certificates")}catch{s=!0}if(s)try{await f(`sudo cp "${n}" "${o}"`),await f("sudo update-ca-trust extract")}catch{}}return!0}async sslFindCertificate(t,r="FlyEnv-Root-CA"){try{if(le()){let n=await f(`security find-certificate -c "${r}"`,{cwd:t});return{stdout:n.stdout,stderr:n.stderr}}else if(Ce()){let n=["/etc/ssl/certs/","/usr/local/share/ca-certificates/","/etc/pki/ca-trust/extracted/pem/","/etc/pki/tls/certs/"],i="";for(let o of n)try{let{stdout:s}=await f(`find "${o}" -name "*.crt" -print 2>/dev/null`),a=s.split(`
`).map(y=>y.trim()).filter(y=>!!y);for(let y of a)try{let{stdout:g}=await f(`openssl x509 -in "${y}" -text -noout`);if(g.includes(`CN = ${r}`)){i=y;break}}catch{}if(i)break}catch{}return i?{stdout:`Found certificate: ${i}
`,stderr:""}:{stdout:"",stderr:`Certificate with CN "${r}" not found on Linux.`}}return{stdout:"",stderr:""}}catch(n){return{stdout:"",stderr:`${n}`}}}async dnsRefresh(){try{if(le()){try{await f("dscacheutil -flushcache")}catch{}try{await f("killall -HUP mDNSResponder")}catch{}}else if(Ce()){try{return await f("sudo systemctl restart systemd-resolved.service"),!0}catch{}try{return await f("sudo systemctl restart nscd.service"),!0}catch{}try{return await f("sudo systemctl restart dnsmasq.service"),!0}catch{}}}catch{}return!0}},ls=new ct});var Wn={};Y(Wn,{default:()=>fs});var at,fs,Bn=U(()=>{"use strict";K();at=class extends F{},fs=new at});var ys={};Y(ys,{default:()=>ms});module.exports=Xn(ys);var Jn=require("node:net");H();H();var ve="/tmp/flyenv-helper.sock",ut=class{Tool;MariaDB;Caddy;Redis;PHP;Mailpit;Mysql;Apache;RabbitMQ;Host;Nginx;async init(){(0,V.existsSync)(ve)&&await Ge(ve);let t=(0,Jn.createServer)(r=>{let n=[];r.on("data",async i=>{n.push(i);let o;try{let s=Buffer.concat(n).toString().trim();o=JSON.parse(s)}catch{}if(o){n.splice(0);let s=o.key,a=o.module,y=o.function,g=o?.args??[],c=u=>{u.exec(y,...g)?.then(m=>{let l={key:s,code:0,data:m};r.write(JSON.stringify(l),d=>{})})?.catch(m=>{let l={key:s,code:1,msg:`${m}`};r.write(JSON.stringify(l))})};if(a==="tools"){if(!this.Tool){let u=await Promise.resolve().then(()=>(wn(),pn));this.Tool=u.default}c(this.Tool)}else if(a==="mariadb"){if(!this.MariaDB){let u=await Promise.resolve().then(()=>(vn(),Sn));this.MariaDB=u.default}c(this.MariaDB)}else if(a==="caddy"){if(!this.Caddy){let u=await Promise.resolve().then(()=>(Pn(),xn));this.Caddy=u.default}c(this.Caddy)}else if(a==="redis"){if(!this.Redis){let u=await Promise.resolve().then(()=>(En(),Fn));this.Redis=u.default}c(this.Redis)}else if(a==="php"){if(!this.PHP){let u=await Promise.resolve().then(()=>($n(),bn));this.PHP=u.default}c(this.PHP)}else if(a==="mailpit"){if(!this.Mailpit){let u=await Promise.resolve().then(()=>(Cn(),Dn));this.Mailpit=u.default}c(this.Mailpit)}else if(a==="mysql"){if(!this.Mysql){let u=await Promise.resolve().then(()=>(Tn(),Nn));this.Mysql=u.default}c(this.Mysql)}else if(a==="apache"){if(!this.Apache){let u=await Promise.resolve().then(()=>(_n(),Ln));this.Apache=u.default}c(this.Apache)}else if(a==="rabbitmq"){if(!this.RabbitMQ){let u=await Promise.resolve().then(()=>(Mn(),Rn));this.RabbitMQ=u.default}c(this.RabbitMQ)}else if(a==="host"){if(!this.Host){let u=await Promise.resolve().then(()=>(An(),jn));this.Host=u.default}c(this.Host)}else if(a==="nginx"){if(!this.Nginx){let u=await Promise.resolve().then(()=>(Bn(),Wn));this.Nginx=u.default}c(this.Nginx)}}}),r.on("end",()=>{try{r.destroySoon()}catch{}})});t.listen(ve,async()=>{await yn(500);let r="/Applications/FlyEnv.app";if((0,V.existsSync)(r)||(r="/Applications/PhpWebStudy.app"),!(0,V.existsSync)(r))return;let n="";try{n=await dn(r)}catch{}n&&(0,V.existsSync)(ve)&&await f(`chown ${n} "${ve}"`)}),t.on("error",r=>{})}},Un=new ut;Un.init().then().catch();var ms=Un;
/**
 * version 2
 */
