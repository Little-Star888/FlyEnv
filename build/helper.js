"use strict";var Qn=Object.create;var Fe=Object.defineProperty;var Vn=Object.getOwnPropertyDescriptor;var zn=Object.getOwnPropertyNames;var Xn=Object.getPrototypeOf,Zn=Object.prototype.hasOwnProperty;var M=(e,t)=>()=>(e&&(t=e(e=0)),t);var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),G=(e,t)=>{for(var r in t)Fe(e,r,{get:t[r],enumerable:!0})},vt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of zn(t))!Zn.call(e,i)&&i!==r&&Fe(e,i,{get:()=>t[i],enumerable:!(n=Vn(t,i))||n.enumerable});return e};var Z=(e,t,r)=>(r=e!=null?Qn(Xn(e)):{},vt(t||!e||!e.__esModule?Fe(r,"default",{value:e,enumerable:!0}):r,e)),ei=e=>vt(Fe({},"__esModule",{value:!0}),e);var D=h(Be=>{"use strict";Be.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{e.call(this,...t,(i,o)=>i!=null?n(i):r(o))})},"name",{value:e.name})};Be.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:e.name})}});var gt=h((kc,kt)=>{var re=require("constants"),ti=process.cwd,Ee=null,ri=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ee||(Ee=ti.call(process)),Ee};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Ue=process.chdir,process.chdir=function(e){Ee=null,Ue.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ue));var Ue;kt.exports=ni;function ni(e){re.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=c(e.chownSync),e.fchownSync=c(e.fchownSync),e.lchownSync=c(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=d(e.statSync),e.fstatSync=d(e.fstatSync),e.lstatSync=d(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(s,u,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(s,u,f,l){l&&process.nextTick(l)},e.lchownSync=function(){}),ri==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(s){function u(f,l,y){var k=Date.now(),x=0;s(f,l,function E(K){if(K&&(K.code==="EACCES"||K.code==="EPERM")&&Date.now()-k<6e4){setTimeout(function(){e.stat(l,function(I,de){I&&I.code==="ENOENT"?s(f,l,E):y(K)})},x),x<100&&(x+=10);return}y&&y(K)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,s),u}(e.rename)),e.read=typeof e.read!="function"?e.read:function(s){function u(f,l,y,k,x,E){var K;if(E&&typeof E=="function"){var I=0;K=function(de,St,xt){if(de&&de.code==="EAGAIN"&&I<10)return I++,s.call(e,f,l,y,k,x,K);E.apply(this,arguments)}}return s.call(e,f,l,y,k,x,K)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,s),u}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(s){return function(u,f,l,y,k){for(var x=0;;)try{return s.call(e,u,f,l,y,k)}catch(E){if(E.code==="EAGAIN"&&x<10){x++;continue}throw E}}}(e.readSync);function t(s){s.lchmod=function(u,f,l){s.open(u,re.O_WRONLY|re.O_SYMLINK,f,function(y,k){if(y){l&&l(y);return}s.fchmod(k,f,function(x){s.close(k,function(E){l&&l(x||E)})})})},s.lchmodSync=function(u,f){var l=s.openSync(u,re.O_WRONLY|re.O_SYMLINK,f),y=!0,k;try{k=s.fchmodSync(l,f),y=!1}finally{if(y)try{s.closeSync(l)}catch{}else s.closeSync(l)}return k}}function r(s){re.hasOwnProperty("O_SYMLINK")&&s.futimes?(s.lutimes=function(u,f,l,y){s.open(u,re.O_SYMLINK,function(k,x){if(k){y&&y(k);return}s.futimes(x,f,l,function(E){s.close(x,function(K){y&&y(E||K)})})})},s.lutimesSync=function(u,f,l){var y=s.openSync(u,re.O_SYMLINK),k,x=!0;try{k=s.futimesSync(y,f,l),x=!1}finally{if(x)try{s.closeSync(y)}catch{}else s.closeSync(y)}return k}):s.futimes&&(s.lutimes=function(u,f,l,y){y&&process.nextTick(y)},s.lutimesSync=function(){})}function n(s){return s&&function(u,f,l){return s.call(e,u,f,function(y){g(y)&&(y=null),l&&l.apply(this,arguments)})}}function i(s){return s&&function(u,f){try{return s.call(e,u,f)}catch(l){if(!g(l))throw l}}}function o(s){return s&&function(u,f,l,y){return s.call(e,u,f,l,function(k){g(k)&&(k=null),y&&y.apply(this,arguments)})}}function c(s){return s&&function(u,f,l){try{return s.call(e,u,f,l)}catch(y){if(!g(y))throw y}}}function a(s){return s&&function(u,f,l){typeof f=="function"&&(l=f,f=null);function y(k,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),l&&l.apply(this,arguments)}return f?s.call(e,u,f,y):s.call(e,u,y)}}function d(s){return s&&function(u,f){var l=f?s.call(e,u,f):s.call(e,u);return l&&(l.uid<0&&(l.uid+=4294967296),l.gid<0&&(l.gid+=4294967296)),l}}function g(s){if(!s||s.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(s.code==="EINVAL"||s.code==="EPERM"))}}});var Et=h((gc,Ft)=>{var Pt=require("stream").Stream;Ft.exports=ii;function ii(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Pt.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var c=Object.keys(i),a=0,d=c.length;a<d;a++){var g=c[a];this[g]=i[g]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(s,u){if(s){o.emit("error",s),o.readable=!1;return}o.fd=u,o.emit("open",u),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Pt.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),c=0,a=o.length;c<a;c++){var d=o[c];this[d]=i[d]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var qt=h((Pc,bt)=>{"use strict";bt.exports=ci;var oi=Object.getPrototypeOf||function(e){return e.__proto__};function ci(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:oi(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var le=h((Fc,Ye)=>{var q=require("fs"),si=gt(),ai=Et(),ui=qt(),be=require("util"),R,Oe;typeof Symbol=="function"&&typeof Symbol.for=="function"?(R=Symbol.for("graceful-fs.queue"),Oe=Symbol.for("graceful-fs.previous")):(R="___graceful-fs.queue",Oe="___graceful-fs.previous");function li(){}function Dt(e,t){Object.defineProperty(e,R,{get:function(){return t}})}var se=li;be.debuglog?se=be.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(se=function(){var e=be.format.apply(be,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `)});q[R]||(Ot=global[R]||[],Dt(q,Ot),q.close=function(e){function t(r,n){return e.call(q,r,function(i){i||$t(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Oe,{value:e}),t}(q.close),q.closeSync=function(e){function t(r){e.apply(q,arguments),$t()}return Object.defineProperty(t,Oe,{value:e}),t}(q.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){se(q[R]),require("assert").equal(q[R].length,0)}));var Ot;global[R]||Dt(global,q[R]);Ye.exports=He(ui(q));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!q.__patched&&(Ye.exports=He(q),q.__patched=!0);function He(e){si(e),e.gracefulify=He,e.createReadStream=St,e.createWriteStream=xt;var t=e.readFile;e.readFile=r;function r(p,S,w){return typeof S=="function"&&(w=S,S=null),T(p,S,w);function T(L,$,b,O){return t(L,$,function(v){v&&(v.code==="EMFILE"||v.code==="ENFILE")?ue([T,[L,$,b],v,O||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(p,S,w,T){return typeof w=="function"&&(T=w,w=null),L(p,S,w,T);function L($,b,O,v,_){return n($,b,O,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?ue([L,[$,b,O,v],P,_||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=c);function c(p,S,w,T){return typeof w=="function"&&(T=w,w=null),L(p,S,w,T);function L($,b,O,v,_){return o($,b,O,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?ue([L,[$,b,O,v],P,_||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=d);function d(p,S,w,T){return typeof w=="function"&&(T=w,w=0),L(p,S,w,T);function L($,b,O,v,_){return a($,b,O,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?ue([L,[$,b,O,v],P,_||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}var g=e.readdir;e.readdir=u;var s=/^v[0-5]\./;function u(p,S,w){typeof S=="function"&&(w=S,S=null);var T=s.test(process.version)?function(b,O,v,_){return g(b,L(b,O,v,_))}:function(b,O,v,_){return g(b,O,L(b,O,v,_))};return T(p,S,w);function L($,b,O,v){return function(_,P){_&&(_.code==="EMFILE"||_.code==="ENFILE")?ue([T,[$,b,O],_,v||Date.now(),Date.now()]):(P&&P.sort&&P.sort(),typeof O=="function"&&O.call(this,_,P))}}}if(process.version.substr(0,4)==="v0.8"){var f=ai(e);E=f.ReadStream,I=f.WriteStream}var l=e.ReadStream;l&&(E.prototype=Object.create(l.prototype),E.prototype.open=K);var y=e.WriteStream;y&&(I.prototype=Object.create(y.prototype),I.prototype.open=de),Object.defineProperty(e,"ReadStream",{get:function(){return E},set:function(p){E=p},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return I},set:function(p){I=p},enumerable:!0,configurable:!0});var k=E;Object.defineProperty(e,"FileReadStream",{get:function(){return k},set:function(p){k=p},enumerable:!0,configurable:!0});var x=I;Object.defineProperty(e,"FileWriteStream",{get:function(){return x},set:function(p){x=p},enumerable:!0,configurable:!0});function E(p,S){return this instanceof E?(l.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function K(){var p=this;We(p.path,p.flags,p.mode,function(S,w){S?(p.autoClose&&p.destroy(),p.emit("error",S)):(p.fd=w,p.emit("open",w),p.read())})}function I(p,S){return this instanceof I?(y.apply(this,arguments),this):I.apply(Object.create(I.prototype),arguments)}function de(){var p=this;We(p.path,p.flags,p.mode,function(S,w){S?(p.destroy(),p.emit("error",S)):(p.fd=w,p.emit("open",w))})}function St(p,S){return new e.ReadStream(p,S)}function xt(p,S){return new e.WriteStream(p,S)}var Gn=e.open;e.open=We;function We(p,S,w,T){return typeof w=="function"&&(T=w,w=null),L(p,S,w,T);function L($,b,O,v,_){return Gn($,b,O,function(P,Sc){P&&(P.code==="EMFILE"||P.code==="ENFILE")?ue([L,[$,b,O,v],P,_||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}return e}function ue(e){se("ENQUEUE",e[0].name,e[1]),q[R].push(e),Ke()}var qe;function $t(){for(var e=Date.now(),t=0;t<q[R].length;++t)q[R][t].length>2&&(q[R][t][3]=e,q[R][t][4]=e);Ke()}function Ke(){if(clearTimeout(qe),qe=void 0,q[R].length!==0){var e=q[R].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)se("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){se("TIMEOUT",t.name,r);var c=r.pop();typeof c=="function"&&c.call(null,n)}else{var a=Date.now()-o,d=Math.max(o-i,1),g=Math.min(d*1.2,100);a>=g?(se("RETRY",t.name,r),t.apply(null,r.concat([i]))):q[R].push(e)}qe===void 0&&(qe=setTimeout(Ke,0))}}});var B=h(ee=>{"use strict";var Nt=D().fromCallback,j=le(),fi=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof j[e]=="function");Object.assign(ee,j);fi.forEach(e=>{ee[e]=Nt(j[e])});ee.exists=function(e,t){return typeof t=="function"?j.exists(e,t):new Promise(r=>j.exists(e,r))};ee.read=function(e,t,r,n,i,o){return typeof o=="function"?j.read(e,t,r,n,i,o):new Promise((c,a)=>{j.read(e,t,r,n,i,(d,g,s)=>{if(d)return a(d);c({bytesRead:g,buffer:s})})})};ee.write=function(e,t,...r){return typeof r[r.length-1]=="function"?j.write(e,t,...r):new Promise((n,i)=>{j.write(e,t,...r,(o,c,a)=>{if(o)return i(o);n({bytesWritten:c,buffer:a})})})};ee.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?j.readv(e,t,...r):new Promise((n,i)=>{j.readv(e,t,...r,(o,c,a)=>{if(o)return i(o);n({bytesRead:c,buffers:a})})})};ee.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?j.writev(e,t,...r):new Promise((n,i)=>{j.writev(e,t,...r,(o,c,a)=>{if(o)return i(o);n({bytesWritten:c,buffers:a})})})};typeof j.realpath.native=="function"?ee.realpath.native=Nt(j.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Tt=h((bc,Ct)=>{"use strict";var mi=require("path");Ct.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(mi.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var Jt=h((qc,Ge)=>{"use strict";var Lt=B(),{checkPath:_t}=Tt(),Rt=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Ge.exports.makeDir=async(e,t)=>(_t(e),Lt.mkdir(e,{mode:Rt(t),recursive:!0}));Ge.exports.makeDirSync=(e,t)=>(_t(e),Lt.mkdirSync(e,{mode:Rt(t),recursive:!0}))});var V=h((Oc,It)=>{"use strict";var yi=D().fromPromise,{makeDir:pi,makeDirSync:Qe}=Jt(),Ve=yi(pi);It.exports={mkdirs:Ve,mkdirsSync:Qe,mkdirp:Ve,mkdirpSync:Qe,ensureDir:Ve,ensureDirSync:Qe}});var ne=h(($c,jt)=>{"use strict";var di=D().fromPromise,Mt=B();function hi(e){return Mt.access(e).then(()=>!0).catch(()=>!1)}jt.exports={pathExists:di(hi),pathExistsSync:Mt.existsSync}});var ze=h((Dc,At)=>{"use strict";var fe=B(),wi=D().fromPromise;async function Si(e,t,r){let n=await fe.open(e,"r+"),i=null;try{await fe.futimes(n,t,r)}finally{try{await fe.close(n)}catch(o){i=o}}if(i)throw i}function xi(e,t,r){let n=fe.openSync(e,"r+");return fe.futimesSync(n,t,r),fe.closeSync(n)}At.exports={utimesMillis:wi(Si),utimesMillisSync:xi}});var ae=h((Nc,Ht)=>{"use strict";var me=B(),N=require("path"),Wt=D().fromPromise;function vi(e,t,r){let n=r.dereference?i=>me.stat(i,{bigint:!0}):i=>me.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function ki(e,t,r){let n,i=r.dereference?c=>me.statSync(c,{bigint:!0}):c=>me.lstatSync(c,{bigint:!0}),o=i(e);try{n=i(t)}catch(c){if(c.code==="ENOENT")return{srcStat:o,destStat:null};throw c}return{srcStat:o,destStat:n}}async function gi(e,t,r,n){let{srcStat:i,destStat:o}=await vi(e,t,n);if(o){if(he(i,o)){let c=N.basename(e),a=N.basename(t);if(r==="move"&&c!==a&&c.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Xe(e,t))throw new Error($e(e,t,r));return{srcStat:i,destStat:o}}function Pi(e,t,r,n){let{srcStat:i,destStat:o}=ki(e,t,n);if(o){if(he(i,o)){let c=N.basename(e),a=N.basename(t);if(r==="move"&&c!==a&&c.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Xe(e,t))throw new Error($e(e,t,r));return{srcStat:i,destStat:o}}async function Bt(e,t,r,n){let i=N.resolve(N.dirname(e)),o=N.resolve(N.dirname(r));if(o===i||o===N.parse(o).root)return;let c;try{c=await me.stat(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(he(t,c))throw new Error($e(e,r,n));return Bt(e,t,o,n)}function Ut(e,t,r,n){let i=N.resolve(N.dirname(e)),o=N.resolve(N.dirname(r));if(o===i||o===N.parse(o).root)return;let c;try{c=me.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(he(t,c))throw new Error($e(e,r,n));return Ut(e,t,o,n)}function he(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Xe(e,t){let r=N.resolve(e).split(N.sep).filter(i=>i),n=N.resolve(t).split(N.sep).filter(i=>i);return r.every((i,o)=>n[o]===i)}function $e(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}Ht.exports={checkPaths:Wt(gi),checkPathsSync:Pi,checkParentPaths:Wt(Bt),checkParentPathsSync:Ut,isSrcSubdir:Xe,areIdentical:he}});var Vt=h((Cc,Qt)=>{"use strict";var J=B(),we=require("path"),{mkdirs:Fi}=V(),{pathExists:Ei}=ne(),{utimesMillis:bi}=ze(),Se=ae();async function qi(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await Se.checkPaths(e,t,"copy",r);if(await Se.checkParentPaths(e,n,t,"copy"),!await Yt(e,t,r))return;let c=we.dirname(t);await Ei(c)||await Fi(c),await Gt(i,e,t,r)}async function Yt(e,t,r){return r.filter?r.filter(e,t):!0}async function Gt(e,t,r,n){let o=await(n.dereference?J.stat:J.lstat)(t);if(o.isDirectory())return Ni(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Oi(o,e,t,r,n);if(o.isSymbolicLink())return Ci(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Oi(e,t,r,n,i){if(!t)return Kt(e,r,n,i);if(i.overwrite)return await J.unlink(n),Kt(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function Kt(e,t,r,n){if(await J.copyFile(t,r),n.preserveTimestamps){$i(e.mode)&&await Di(r,e.mode);let i=await J.stat(t);await bi(r,i.atime,i.mtime)}return J.chmod(r,e.mode)}function $i(e){return(e&128)===0}function Di(e,t){return J.chmod(e,t|128)}async function Ni(e,t,r,n,i){t||await J.mkdir(n);let o=[];for await(let c of await J.opendir(r)){let a=we.join(r,c.name),d=we.join(n,c.name);o.push(Yt(a,d,i).then(g=>{if(g)return Se.checkPaths(a,d,"copy",i).then(({destStat:s})=>Gt(s,a,d,i))}))}await Promise.all(o),t||await J.chmod(n,e.mode)}async function Ci(e,t,r,n){let i=await J.readlink(t);if(n.dereference&&(i=we.resolve(process.cwd(),i)),!e)return J.symlink(i,r);let o=null;try{o=await J.readlink(r)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return J.symlink(i,r);throw c}if(n.dereference&&(o=we.resolve(process.cwd(),o)),Se.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(Se.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return await J.unlink(r),J.symlink(i,r)}Qt.exports=qi});var tr=h((Tc,er)=>{"use strict";var A=le(),xe=require("path"),Ti=V().mkdirsSync,Li=ze().utimesMillisSync,ve=ae();function _i(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=ve.checkPathsSync(e,t,"copy",r);if(ve.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let o=xe.dirname(t);return A.existsSync(o)||Ti(o),zt(i,e,t,r)}function zt(e,t,r,n){let o=(n.dereference?A.statSync:A.lstatSync)(t);if(o.isDirectory())return Wi(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Ri(o,e,t,r,n);if(o.isSymbolicLink())return Hi(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Ri(e,t,r,n,i){return t?Ji(e,r,n,i):Xt(e,r,n,i)}function Ji(e,t,r,n){if(n.overwrite)return A.unlinkSync(r),Xt(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Xt(e,t,r,n){return A.copyFileSync(t,r),n.preserveTimestamps&&Ii(e.mode,t,r),Ze(r,e.mode)}function Ii(e,t,r){return Mi(e)&&ji(r,e),Ai(t,r)}function Mi(e){return(e&128)===0}function ji(e,t){return Ze(e,t|128)}function Ze(e,t){return A.chmodSync(e,t)}function Ai(e,t){let r=A.statSync(e);return Li(t,r.atime,r.mtime)}function Wi(e,t,r,n,i){return t?Zt(r,n,i):Bi(e.mode,r,n,i)}function Bi(e,t,r,n){return A.mkdirSync(r),Zt(t,r,n),Ze(r,e)}function Zt(e,t,r){let n=A.opendirSync(e);try{let i;for(;(i=n.readSync())!==null;)Ui(i.name,e,t,r)}finally{n.closeSync()}}function Ui(e,t,r,n){let i=xe.join(t,e),o=xe.join(r,e);if(n.filter&&!n.filter(i,o))return;let{destStat:c}=ve.checkPathsSync(i,o,"copy",n);return zt(c,i,o,n)}function Hi(e,t,r,n){let i=A.readlinkSync(t);if(n.dereference&&(i=xe.resolve(process.cwd(),i)),e){let o;try{o=A.readlinkSync(r)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return A.symlinkSync(i,r);throw c}if(n.dereference&&(o=xe.resolve(process.cwd(),o)),ve.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(ve.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Ki(i,r)}else return A.symlinkSync(i,r)}function Ki(e,t){return A.unlinkSync(t),A.symlinkSync(e,t)}er.exports=_i});var De=h((Lc,rr)=>{"use strict";var Yi=D().fromPromise;rr.exports={copy:Yi(Vt()),copySync:tr()}});var ke=h((_c,ir)=>{"use strict";var nr=le(),Gi=D().fromCallback;function Qi(e,t){nr.rm(e,{recursive:!0,force:!0},t)}function Vi(e){nr.rmSync(e,{recursive:!0,force:!0})}ir.exports={remove:Gi(Qi),removeSync:Vi}});var mr=h((Rc,fr)=>{"use strict";var zi=D().fromPromise,sr=B(),ar=require("path"),ur=V(),lr=ke(),or=zi(async function(t){let r;try{r=await sr.readdir(t)}catch{return ur.mkdirs(t)}return Promise.all(r.map(n=>lr.remove(ar.join(t,n))))});function cr(e){let t;try{t=sr.readdirSync(e)}catch{return ur.mkdirsSync(e)}t.forEach(r=>{r=ar.join(e,r),lr.removeSync(r)})}fr.exports={emptyDirSync:cr,emptydirSync:cr,emptyDir:or,emptydir:or}});var hr=h((Jc,dr)=>{"use strict";var Xi=D().fromPromise,yr=require("path"),te=B(),pr=V();async function Zi(e){let t;try{t=await te.stat(e)}catch{}if(t&&t.isFile())return;let r=yr.dirname(e),n=null;try{n=await te.stat(r)}catch(i){if(i.code==="ENOENT"){await pr.mkdirs(r),await te.writeFile(e,"");return}else throw i}n.isDirectory()?await te.writeFile(e,""):await te.readdir(r)}function eo(e){let t;try{t=te.statSync(e)}catch{}if(t&&t.isFile())return;let r=yr.dirname(e);try{te.statSync(r).isDirectory()||te.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")pr.mkdirsSync(r);else throw n}te.writeFileSync(e,"")}dr.exports={createFile:Xi(Zi),createFileSync:eo}});var kr=h((Ic,vr)=>{"use strict";var to=D().fromPromise,wr=require("path"),ie=B(),Sr=V(),{pathExists:ro}=ne(),{areIdentical:xr}=ae();async function no(e,t){let r;try{r=await ie.lstat(t)}catch{}let n;try{n=await ie.lstat(e)}catch(c){throw c.message=c.message.replace("lstat","ensureLink"),c}if(r&&xr(n,r))return;let i=wr.dirname(t);await ro(i)||await Sr.mkdirs(i),await ie.link(e,t)}function io(e,t){let r;try{r=ie.lstatSync(t)}catch{}try{let o=ie.lstatSync(e);if(r&&xr(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=wr.dirname(t);return ie.existsSync(n)||Sr.mkdirsSync(n),ie.linkSync(e,t)}vr.exports={createLink:to(no),createLinkSync:io}});var Pr=h((Mc,gr)=>{"use strict";var oe=require("path"),ge=B(),{pathExists:oo}=ne(),co=D().fromPromise;async function so(e,t){if(oe.isAbsolute(e)){try{await ge.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:e}}let r=oe.dirname(t),n=oe.join(r,e);if(await oo(n))return{toCwd:n,toDst:e};try{await ge.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:oe.relative(r,e)}}function ao(e,t){if(oe.isAbsolute(e)){if(!ge.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=oe.dirname(t),n=oe.join(r,e);if(ge.existsSync(n))return{toCwd:n,toDst:e};if(!ge.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:oe.relative(r,e)}}gr.exports={symlinkPaths:co(so),symlinkPathsSync:ao}});var br=h((jc,Er)=>{"use strict";var Fr=B(),uo=D().fromPromise;async function lo(e,t){if(t)return t;let r;try{r=await Fr.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function fo(e,t){if(t)return t;let r;try{r=Fr.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Er.exports={symlinkType:uo(lo),symlinkTypeSync:fo}});var Dr=h((Ac,$r)=>{"use strict";var mo=D().fromPromise,qr=require("path"),z=B(),{mkdirs:yo,mkdirsSync:po}=V(),{symlinkPaths:ho,symlinkPathsSync:wo}=Pr(),{symlinkType:So,symlinkTypeSync:xo}=br(),{pathExists:vo}=ne(),{areIdentical:Or}=ae();async function ko(e,t,r){let n;try{n=await z.lstat(t)}catch{}if(n&&n.isSymbolicLink()){let[a,d]=await Promise.all([z.stat(e),z.stat(t)]);if(Or(a,d))return}let i=await ho(e,t);e=i.toDst;let o=await So(i.toCwd,r),c=qr.dirname(t);return await vo(c)||await yo(c),z.symlink(e,t,o)}function go(e,t,r){let n;try{n=z.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let a=z.statSync(e),d=z.statSync(t);if(Or(a,d))return}let i=wo(e,t);e=i.toDst,r=xo(i.toCwd,r);let o=qr.dirname(t);return z.existsSync(o)||po(o),z.symlinkSync(e,t,r)}$r.exports={createSymlink:mo(ko),createSymlinkSync:go}});var Ir=h((Wc,Jr)=>{"use strict";var{createFile:Nr,createFileSync:Cr}=hr(),{createLink:Tr,createLinkSync:Lr}=kr(),{createSymlink:_r,createSymlinkSync:Rr}=Dr();Jr.exports={createFile:Nr,createFileSync:Cr,ensureFile:Nr,ensureFileSync:Cr,createLink:Tr,createLinkSync:Lr,ensureLink:Tr,ensureLinkSync:Lr,createSymlink:_r,createSymlinkSync:Rr,ensureSymlink:_r,ensureSymlinkSync:Rr}});var Ne=h((Bc,Mr)=>{function Po(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function Fo(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Mr.exports={stringify:Po,stripBom:Fo}});var Br=h((Uc,Wr)=>{var ye;try{ye=le()}catch{ye=require("fs")}var Ce=D(),{stringify:jr,stripBom:Ar}=Ne();async function Eo(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ye,n="throws"in t?t.throws:!0,i=await Ce.fromCallback(r.readFile)(e,t);i=Ar(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(c){if(n)throw c.message=`${e}: ${c.message}`,c;return null}return o}var bo=Ce.fromPromise(Eo);function qo(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ye,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Ar(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function Oo(e,t,r={}){let n=r.fs||ye,i=jr(t,r);await Ce.fromCallback(n.writeFile)(e,i,r)}var $o=Ce.fromPromise(Oo);function Do(e,t,r={}){let n=r.fs||ye,i=jr(t,r);return n.writeFileSync(e,i,r)}var No={readFile:bo,readFileSync:qo,writeFile:$o,writeFileSync:Do};Wr.exports=No});var Hr=h((Hc,Ur)=>{"use strict";var Te=Br();Ur.exports={readJson:Te.readFile,readJsonSync:Te.readFileSync,writeJson:Te.writeFile,writeJsonSync:Te.writeFileSync}});var Le=h((Kc,Gr)=>{"use strict";var Co=D().fromPromise,et=B(),Kr=require("path"),Yr=V(),To=ne().pathExists;async function Lo(e,t,r="utf-8"){let n=Kr.dirname(e);return await To(n)||await Yr.mkdirs(n),et.writeFile(e,t,r)}function _o(e,...t){let r=Kr.dirname(e);et.existsSync(r)||Yr.mkdirsSync(r),et.writeFileSync(e,...t)}Gr.exports={outputFile:Co(Lo),outputFileSync:_o}});var Vr=h((Yc,Qr)=>{"use strict";var{stringify:Ro}=Ne(),{outputFile:Jo}=Le();async function Io(e,t,r={}){let n=Ro(t,r);await Jo(e,n,r)}Qr.exports=Io});var Xr=h((Gc,zr)=>{"use strict";var{stringify:Mo}=Ne(),{outputFileSync:jo}=Le();function Ao(e,t,r){let n=Mo(t,r);jo(e,n,r)}zr.exports=Ao});var en=h((Qc,Zr)=>{"use strict";var Wo=D().fromPromise,W=Hr();W.outputJson=Wo(Vr());W.outputJsonSync=Xr();W.outputJSON=W.outputJson;W.outputJSONSync=W.outputJsonSync;W.writeJSON=W.writeJson;W.writeJSONSync=W.writeJsonSync;W.readJSON=W.readJson;W.readJSONSync=W.readJsonSync;Zr.exports=W});var cn=h((Vc,on)=>{"use strict";var Bo=B(),tn=require("path"),{copy:Uo}=De(),{remove:nn}=ke(),{mkdirp:Ho}=V(),{pathExists:Ko}=ne(),rn=ae();async function Yo(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await rn.checkPaths(e,t,"move",r);await rn.checkParentPaths(e,i,t,"move");let c=tn.dirname(t);return tn.parse(c).root!==c&&await Ho(c),Go(e,t,n,o)}async function Go(e,t,r,n){if(!n){if(r)await nn(t);else if(await Ko(t))throw new Error("dest already exists.")}try{await Bo.rename(e,t)}catch(i){if(i.code!=="EXDEV")throw i;await Qo(e,t,r)}}async function Qo(e,t,r){return await Uo(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),nn(e)}on.exports=Yo});var fn=h((zc,ln)=>{"use strict";var an=le(),rt=require("path"),Vo=De().copySync,un=ke().removeSync,zo=V().mkdirpSync,sn=ae();function Xo(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=sn.checkPathsSync(e,t,"move",r);return sn.checkParentPathsSync(e,i,t,"move"),Zo(t)||zo(rt.dirname(t)),ec(e,t,n,o)}function Zo(e){let t=rt.dirname(e);return rt.parse(t).root===t}function ec(e,t,r,n){if(n)return tt(e,t,r);if(r)return un(t),tt(e,t,r);if(an.existsSync(t))throw new Error("dest already exists.");return tt(e,t,r)}function tt(e,t,r){try{an.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return tc(e,t,r)}}function tc(e,t,r){return Vo(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),un(e)}ln.exports=Xo});var yn=h((Xc,mn)=>{"use strict";var rc=D().fromPromise;mn.exports={move:rc(cn()),moveSync:fn()}});var _e,pe,U,H,ce,Re,Je,Ie,Me,nc,Zc,es,ts,rs,ns,is,os,cs,ss,as,us,ls,fs,ms,ys,ps,ds,hs,ws,Ss,xs,vs,ks,gs,Ps,Fs,Es,bs,qs,Os,$s,je,Ds,Ns,Cs,Ts,Ls,_s,Rs,Js,Is,Ae,ic,Ms,pn=M(()=>{_e=Z(De(),1),pe=Z(mr(),1),U=Z(Ir(),1),H=Z(en(),1),ce=Z(V(),1),Re=Z(yn(),1),Je=Z(Le(),1),Ie=Z(ne(),1),Me=Z(ke(),1),nc=_e.default.copy,Zc=_e.default.copySync,es=pe.default.emptyDirSync,ts=pe.default.emptydirSync,rs=pe.default.emptyDir,ns=pe.default.emptydir,is=U.default.createFile,os=U.default.createFileSync,cs=U.default.ensureFile,ss=U.default.ensureFileSync,as=U.default.createLink,us=U.default.createLinkSync,ls=U.default.ensureLink,fs=U.default.ensureLinkSync,ms=U.default.createSymlink,ys=U.default.createSymlinkSync,ps=U.default.ensureSymlink,ds=U.default.ensureSymlinkSync,hs=H.default.readJson,ws=H.default.readJSON,Ss=H.default.readJsonSync,xs=H.default.readJSONSync,vs=H.default.writeJson,ks=H.default.writeJSON,gs=H.default.writeJsonSync,Ps=H.default.writeJSONSync,Fs=H.default.outputJson,Es=H.default.outputJSON,bs=H.default.outputJsonSync,qs=H.default.outputJSONSync,Os=ce.default.mkdirs,$s=ce.default.mkdirsSync,je=ce.default.mkdirp,Ds=ce.default.mkdirpSync,Ns=ce.default.ensureDir,Cs=ce.default.ensureDirSync,Ts=Re.default.move,Ls=Re.default.moveSync,_s=Je.default.outputFile,Rs=Je.default.outputFileSync,Js=Ie.default.pathExists,Is=Ie.default.pathExistsSync,Ae=Me.default.remove,ic=Me.default.removeSync,Ms={..._e.default,...pe.default,...U.default,...H.default,...ce.default,...Re.default,...Je.default,...Ie.default,...Me.default}});var X,C,dn=M(()=>{"use strict";pn();X=require("node:fs"),C=require("node:fs/promises")});function Sn(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}function nt(e=32){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}async function xn(e){let r=(await m(`ls -al "${e}"`))?.stdout?.trim()?.split(`
`)?.[1]?.split(" ")?.filter(n=>!!n.trim())??[];return`${r[2]}:${r[3]}`}var hn,wn,m,Y=M(()=>{"use strict";dn();hn=require("child_process"),wn=require("util"),m=(0,wn.promisify)(hn.exec)});var F,Q=M(()=>{"use strict";Y();F=class{exec(t,...r){let n=this?.[t];return n?n.call(this,...r):new Promise((i,o)=>{o(new Error("No Found Function"))})}startService(t,r={}){return new Promise(async(n,i)=>{try{await m(t,r)}catch(o){i(o);return}n(!0)})}}});var vn={};G(vn,{default:()=>oc});var it,ot,ct,oc,kn=M(()=>{"use strict";it=require("node:path");Y();ot=require("node:fs");Q();ct=class extends F{writeFileByRoot(t,r){return new Promise(async(n,i)=>{let o=!1,c;try{await(0,C.writeFile)(t,r)}catch(a){o=!0,c=a}if(o){let a=(0,it.join)("/tmp",`${nt()}.txt`);await(0,C.writeFile)(a,r);try{await m(`cp -f "${a}" "${t}"`),o=!1}catch(d){c=d}try{await m(`rm -rf "${a}"`)}catch{}}if(o){i(c);return}n(!0)})}readFileByRoot(t){return new Promise(async(r,n)=>{let i="",o,c=!1;try{i=await(0,C.readFile)(t,"utf-8")}catch(a){o=a,c=!0}if(c){let a=(0,it.join)(global.Server.Cache,`${nt()}.txt`);try{await m(`cp -f "${t}" "${a}"`),i=await(0,C.readFile)(a,"utf-8"),await m(`rm -rf "${a}"`),c=!1}catch(d){o=d,c=!0}}if(c)return n(o);r(i)})}processList(){return new Promise(async t=>{let r="";try{r=(await m("ps axo user,pid,ppid,command")).stdout}catch{}return t(r?r.trim().split(`
`).filter(n=>!!n.trim()).map(n=>{let i=n.split(" ").filter(g=>!!g.trim()),o=i.shift(),c=i.shift(),a=i.shift(),d=i.join(" ");return{USER:o,PID:c,PPID:a,COMMAND:d}}):[])})}rm(t){return new Promise(async r=>{try{await m(`rm -rf "${t}"`)}catch{}r(!0)})}chmod(t,r){return new Promise(async n=>{if((0,ot.existsSync)(t))try{await m(`chmod ${r} "${t}"`)}catch{}n(!0)})}kill(t,r){return new Promise(async n=>{try{await m(`kill ${t} ${r.join(" ")}`)}catch{}n(!0)})}ln_s(t,r){return new Promise(async n=>{if((0,ot.existsSync)(t))try{await m(`ln -s "${t}" "${r}"`)}catch{}n(!0)})}killPorts(t){return new Promise(async r=>{let n=new Set;for(let i of t){let o=await m(`lsof -nP -i:${i} | grep '(LISTEN)' | awk '{print $1,$2,$3,$9,$10}'`);o=o?.stdout??"",o.split(`
`).filter(a=>a.includes(`:${i} (LISTEN)`)).map(a=>{let d=a.split(" ").filter(g=>g.trim().length>0);return d.shift(),d.shift()}).forEach(a=>n.add(a))}if(n.size>0)try{await m(["kill","-9",...Array.from(n)].join(" "))}catch{}r(!0)})}getPortPids(t){return new Promise(async r=>{let i=(await m(`lsof -nP -i:${t} | awk '{print $1,$2,$3}'`)).stdout.toString().trim().split(`
`).filter((o,c)=>c>0).map(o=>{let c=o.split(" ").filter(s=>s.trim().length>0),a=c.pop(),d=c.pop(),g=c.join(" ");return{USER:a,PID:d,COMMAND:g}});r(i)})}},oc=new ct});var gn={};G(gn,{default:()=>cc});var st,cc,Pn=M(()=>{"use strict";Q();Y();st=class extends F{macportsDirFixed(t,r){return new Promise(async n=>{try{await m(`mkdir -p ${t}`),await m(`cp -R ${r} ${t}`)}catch{}n(!0)})}},cc=new st});var En={};G(En,{default:()=>sc});var Fn,at,sc,bn=M(()=>{"use strict";Fn=require("node:fs");Q();Y();at=class extends F{sslDirFixed(t){return new Promise(async r=>{if((0,Fn.existsSync)(t))try{(await m(["ls","-al",t].join(" "))).stdout.includes(" root ")&&await m(["rm","-rf",t].join(" "))}catch{}r(!0)})}},sc=new at});var On={};G(On,{default:()=>ac});var qn,ut,ac,$n=M(()=>{"use strict";qn=require("node:fs");Q();Y();ut=class extends F{logFileFixed(t,r){return new Promise(async n=>{(0,qn.existsSync)(t)&&await m(`chown ${r} ${t}`),n(!0)})}},ac=new ut});var Nn={};G(Nn,{default:()=>uc});var Dn,lt,uc,Cn=M(()=>{"use strict";Q();Dn=require("node:path");Y();lt=class extends F{iniFileFixed(t,r){return new Promise(async n=>{await je((0,Dn.dirname)(t)),await m(`cp -f "${r}" "${t}"`),await m(`chmod 755 "${t}"`),n(!0)})}iniDefaultFileFixed(t,r){return new Promise(async n=>{await m(`cp -f "${r}" "${t}"`),n(!0)})}},uc=new lt});var Ln={};G(Ln,{default:()=>lc});var Tn,ft,lc,_n=M(()=>{"use strict";Tn=require("node:fs");Q();Y();ft=class extends F{binFixed(t){return new Promise(async r=>{if((0,Tn.existsSync)(t))try{await m(`xattr -dr "com.apple.quarantine" "${t}"`)}catch{}r(!0)})}},lc=new ft});var Rn={};G(Rn,{default:()=>fc});var mt,fc,Jn=M(()=>{"use strict";Q();Y();mt=class extends F{macportsDirFixed(t,r,n,i){return new Promise(async o=>{try{await m(`mkdir -p "${t}"`),await m(`cp -R "${r}/*" "${t}"`),await m(`mkdir -p "${n}"`),await m(`cp -R "${i}" "${n}"`)}catch{}o(!0)})}},fc=new mt});var In={};G(In,{default:()=>mc});var yt,mc,Mn=M(()=>{"use strict";Q();yt=class extends F{},mc=new yt});var jn={};G(jn,{default:()=>yc});var pt,yc,An=M(()=>{"use strict";Q();Y();pt=class extends F{initPlugin(t){return new Promise(async(r,n)=>{try{await m("./rabbitmq-plugins enable rabbitmq_management",{cwd:t})}catch(i){n(i);return}r(!0)})}},yc=new pt});var Wn={};G(Wn,{default:()=>pc});var dt,pc,Bn=M(()=>{"use strict";Q();Y();dt=class extends F{sslAddTrustedCert(t){return new Promise(async(r,n)=>{try{await m('security add-trusted-cert -d -r trustRoot -k "/Library/Keychains/System.keychain" "PhpWebStudy-Root-CA.crt"',{cwd:t})}catch(i){n(i);return}r(!0)})}sslFindCertificate(t){return new Promise(async(r,n)=>{try{let i=await m('security find-certificate -c "PhpWebStudy-Root-CA"',{cwd:t});r({stdout:i.stdout,stderr:i.stderr})}catch(i){n(i)}})}dnsRefresh(){return new Promise(async t=>{try{await m("dscacheutil -flushcache")}catch{}try{await m("killall -HUP mDNSResponder")}catch{}t(!0)})}},pc=new dt});var Un={};G(Un,{default:()=>dc});var ht,dc,Hn=M(()=>{"use strict";Q();ht=class extends F{},dc=new ht});var wc={};G(wc,{default:()=>hc});module.exports=ei(wc);var Kn=require("node:net");Y();Y();var Pe="/tmp/flyenv-helper.sock",wt=class{Tool;MariaDB;Caddy;Redis;PHP;Mailpit;Mysql;Apache;RabbitMQ;Host;Nginx;async init(){(0,X.existsSync)(Pe)&&await Ae(Pe);let t=(0,Kn.createServer)(r=>{let n=[];r.on("data",async i=>{n.push(i);let o;try{let c=Buffer.concat(n).toString().trim();o=JSON.parse(c)}catch{}if(o){n.splice(0);let c=o.key,a=o.module,d=o.function,g=o?.args??[],s=u=>{u.exec(d,...g)?.then(f=>{let l={key:c,code:0,data:f};r.write(JSON.stringify(l),y=>{})})?.catch(f=>{let l={key:c,code:1,msg:`${f}`};r.write(JSON.stringify(l))})};if(a==="tools"){if(!this.Tool){let u=await Promise.resolve().then(()=>(kn(),vn));this.Tool=u.default}s(this.Tool)}else if(a==="mariadb"){if(!this.MariaDB){let u=await Promise.resolve().then(()=>(Pn(),gn));this.MariaDB=u.default}s(this.MariaDB)}else if(a==="caddy"){if(!this.Caddy){let u=await Promise.resolve().then(()=>(bn(),En));this.Caddy=u.default}s(this.Caddy)}else if(a==="redis"){if(!this.Redis){let u=await Promise.resolve().then(()=>($n(),On));this.Redis=u.default}s(this.Redis)}else if(a==="php"){if(!this.PHP){let u=await Promise.resolve().then(()=>(Cn(),Nn));this.PHP=u.default}s(this.PHP)}else if(a==="mailpit"){if(!this.Mailpit){let u=await Promise.resolve().then(()=>(_n(),Ln));this.Mailpit=u.default}s(this.Mailpit)}else if(a==="mysql"){if(!this.Mysql){let u=await Promise.resolve().then(()=>(Jn(),Rn));this.Mysql=u.default}s(this.Mysql)}else if(a==="apache"){if(!this.Apache){let u=await Promise.resolve().then(()=>(Mn(),In));this.Apache=u.default}s(this.Apache)}else if(a==="rabbitmq"){if(!this.RabbitMQ){let u=await Promise.resolve().then(()=>(An(),jn));this.RabbitMQ=u.default}s(this.RabbitMQ)}else if(a==="host"){if(!this.Host){let u=await Promise.resolve().then(()=>(Bn(),Wn));this.Host=u.default}s(this.Host)}else if(a==="nginx"){if(!this.Nginx){let u=await Promise.resolve().then(()=>(Hn(),Un));this.Nginx=u.default}s(this.Nginx)}}}),r.on("end",()=>{try{r.destroySoon()}catch{}})});t.listen(Pe,async()=>{await Sn(500);let r="/Applications/FlyEnv.app";if((0,X.existsSync)(r)||(r="/Applications/PhpWebStudy.app"),!(0,X.existsSync)(r))return;let n="";try{n=await xn(r)}catch{}n&&(0,X.existsSync)(Pe)&&await m(`chown ${n} "${Pe}"`)}),t.on("error",r=>{})}},Yn=new wt;Yn.init().then().catch();var hc=Yn;
